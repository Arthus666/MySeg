import"./default-d6449ec9.js";import{B as L}from"./index-b8dcc177.js";import{_ as I,a as z}from"./index-8be33a14.js";import"./index-c815d254.js";import{C as F}from"./index-598778fa.js";import{_ as O,M as S}from"./index-f293e05a.js";import{a as T,_ as A,b as M,S as V,c as q}from"./index-f77292cd.js";/* empty css              */import{v as E,a as d,A as P,o as j,ac as D,ad as x,ai as G,a2 as J,_ as U,ae as W,W as X,d as C,h as $,f as e,w as o,k as u,q as g,t as H,F as N,j as Q,X as Y,e as Z}from"./index-1e170dd9.js";import{_ as ee}from"./index-f13b2e24.js";import{a as te}from"./icon-d0fda4a2.js";import{_ as oe}from"./index-b17a8784.js";import"./collapseMotion-aa2d52e7.js";import"./responsiveObserve-32929795.js";import"./antInputDirective-8ac36ea7.js";import"./omit-f0e2af22.js";import"./FormItemContext-4dbce140.js";import"./EyeOutlined-b9fb840d.js";import"./_flatRest-684801fb.js";import"./toInteger-020d1e08.js";import"./debounce-0dca6d6d.js";import"./useSize-f4b45b31.js";import"./Menu-7d70b547.js";import"./index-6780caaa.js";import"./Dropdown-ad434ecf.js";import"./List-e1ba37cc.js";import"./eagerComputed-6d64a5a5.js";import"./CheckOutlined-f559be9b.js";import"./index-e6fd304e.js";import"./SearchOutlined-9fcf4e20.js";const ne=E({setup(t,n){const _=d(""),h=d("b"),s=d(!1),i=d([]),m=d([]),v=d([]),f=d([]),K=d(null);P(i,()=>{console.log("selectedKeys",i.value[0])}),j(()=>{D({user_token:w},0).then(a=>{a.code==="200"?r.value=[...a.data]:console.log(a)}),x({user_token:w},0).then(a=>{a.code==="200"?(console.log(a.data),l.value=[...a.data]):console.log(a.msg)})});const y=d([]),k=d("segmented"),r=d([]),l=d([]);d("");const R=G(()=>k.value!=="segmented"),B={title:"directoryName",key:"directoryId",user_id:0,fileLink:null},w=J().user_token;return{handleOk:a=>{console.log(a),s.value=!1},handleCancel:a=>{s.value=!1},upload_file:a=>{_.value=a.file.name;const p=new FormData;p.append("father_dirctory_id",i.value[0]||0),p.append("medical_status","unsegmented"),p.append("medical_file",a.file),p.append("medical_model",null),console.log(p),W({user_token:w},p).then(c=>{console.log("上传文件响应值：",c),c.code==="200"?(console.log("上传成功"),s.value=!1,n.emit("on-change",{type:"local",id:c.data})):(K.value="上传失败",console.log(c.msg))})},CouldUpload:()=>{const a=document.getElementsByClassName("ant-tree-node-selected");_.value=a[0].innerText,n.emit("on-change",{type:"cloud",id:v.value[0]}),s.value=!1},onLoadData:a=>new Promise(p=>{console.log("length:",r.value.length);const c=r.value.length===0?0:a.dataRef.directoryId||0;console.log(c),D({user_token:w},c).then(b=>{b.code==="200"?(a.dataRef.children=b.data,r.value=[...r.value],p()):(console.log("获取根目录下子目录失败"),p())})}),onLoadData1:a=>new Promise(p=>{console.log("length:",r.value.length);const c=r.value.length===0?0:a.dataRef.directoryId||0;console.log(c),x({user_token:w},c).then(b=>{b.code==="200"?(console.log(b.data),a.dataRef.children=b.data,l.value=[...l.value],p()):(console.log(b.msg),p())})}),fileName:_,treeData:r,treeData1:l,fieldNames:B,selectedKeys:i,selectedKeys1:v,value1:h,visible:s,isselect:R,expandedKeys:m,expandedKeys1:f,fileList:y}}}),ae={key:0,style:{height:"60vh",overflow:"auto"}},se=g("h4",{style:{"margin-top":"20px"}},"1.上传到",-1),le=g("br",null,null,-1),ie=g("br",null,null,-1),de={key:1,style:{height:"60vh",overflow:"auto"}},re=g("br",null,null,-1);function ue(t,n,_,h,s,i){const m=T,v=A,f=X("folder-outlined"),K=O,y=L,k=M,r=S;return C(),$(N,null,[e(v,{value:t.value1,"onUpdate:value":n[0]||(n[0]=l=>t.value1=l),"button-style":"solid"},{default:o(()=>[e(m,{value:"a"},{default:o(()=>[u("本地文件")]),_:1}),e(m,{value:"b"},{default:o(()=>[u("云端文件")]),_:1})]),_:1},8,["value"]),g("div",{class:"import_box",onClick:n[1]||(n[1]=l=>t.visible=!0)},[g("h2",null,H(t.fileName.length===0?"导入医疗文件":`已选择文件:${t.fileName}`),1)]),e(r,{visible:t.visible,title:"上传",onOk:t.handleOk,onCancel:t.handleCancel,footer:null},{default:o(()=>[t.value1=="a"?(C(),$("div",ae,[se,le,e(K,{expandedKeys:t.expandedKeys,"onUpdate:expandedKeys":n[2]||(n[2]=l=>t.expandedKeys=l),selectedKeys:t.selectedKeys,"onUpdate:selectedKeys":n[3]||(n[3]=l=>t.selectedKeys=l),"load-data":t.onLoadData,"tree-data":t.treeData,"field-names":t.fieldNames,"show-icon":!0},{icon:o(()=>[e(f)]),_:1},8,["expandedKeys","selectedKeys","load-data","tree-data","field-names"]),ie,e(k,{"file-list":t.fileList,"max-count":1,customRequest:t.upload_file,showUploadList:!1},{default:o(()=>[e(y,{type:"primary"},{default:o(()=>[u(" 选择文件 ")]),_:1})]),_:1},8,["file-list","customRequest"])])):(C(),$("div",de,[e(K,{expandedKeys:t.expandedKeys1,"onUpdate:expandedKeys":n[4]||(n[4]=l=>t.expandedKeys1=l),selectedKeys:t.selectedKeys1,"onUpdate:selectedKeys":n[5]||(n[5]=l=>t.selectedKeys1=l),"load-data":t.onLoadData1,"tree-data":t.treeData1,"field-names":t.fieldNames},null,8,["expandedKeys","selectedKeys","load-data","tree-data","field-names"]),re,e(y,{type:"primary",onClick:n[6]||(n[6]=l=>t.CouldUpload())},{default:o(()=>[u(" 确定 ")]),_:1})]))]),_:1},8,["visible","onOk","onCancel"])],64)}const pe=U(ne,[["render",ue]]),ce={style:{"font-size":"20px","font-weight":"600",display:"flex","align-items":"center"}},_e=g("h3",null,"本地文件",-1),me=g("h3",null,"云端文件",-1),fe={__name:"FunIntro",setup(t){return(n,_)=>{const h=ee,s=V,i=q;return C(),$(N,null,[g("div",ce,[e(Q(te),{type:"icon-gongneng-",style:{"font-size":"28px"}}),u("   功能介绍 ")]),e(h),_e,e(i,{direction:"vertical",size:"small",current:4},{default:o(()=>[e(s,{title:"第一步",description:"选择上传目录",status:"finish"},{icon:o(()=>[u(" ① ")]),_:1}),e(s,{title:"第二步",description:"选择本地文件",status:"finish"},{icon:o(()=>[u(" ② ")]),_:1}),e(s,{title:"第三步",description:"输入后处理脚本",status:"finish"},{icon:o(()=>[u(" ③ ")]),_:1}),e(s,{title:"第四步",description:"开始数据分析",status:"finish"},{icon:o(()=>[u(" ④ ")]),_:1})]),_:1}),e(h,{style:{margin:"20px 0"}}),me,e(i,{direction:"vertical",size:"small",current:4},{default:o(()=>[e(s,{title:"第一步",description:"选择云端文件",status:"finish"},{icon:o(()=>[u(" ① ")]),_:1}),e(s,{title:"第二步",description:"输入后处理脚本",status:"finish"},{icon:o(()=>[u(" ② ")]),_:1}),e(s,{title:"第三步",description:"开始数据分析",status:"finish"},{icon:o(()=>[u(" ③ ")]),_:1})]),_:1})],64)}}};const ge={__name:"index",setup(t){const n=d("nv1.opts.isColorbar = !nv1.opts.isColorbar;nv1.opts.backColor[0] = 1 - nv1.opts.backColor[0];nv1.updateGLVolume()"),_={type:"",id:""},h=i=>{console.log(i.type,i.id),_.type=i.type,_.id=i.id};Y();const s=()=>{localStorage.setItem("script_text",n.value),window.open(`http://127.0.0.1:3300/#/nii_analyse?info=${JSON.stringify(_)}`,"_blank","noreferrer")};return(i,m)=>{const v=F,f=z,K=oe,y=I,k=L;return C(),Z(y,{style:{padding:"2vh 1vw","margin-right":"0","margin-left":"0"}},{default:o(()=>[e(f,{span:19},{default:o(()=>[e(y,{style:{height:"80vh","margin-bottom":"2vh","margin-right":"1vw"}},{default:o(()=>[e(f,{span:13,class:"ra-box"},{default:o(()=>[e(v,{class:"box"},{default:o(()=>[e(pe,{onOnChange:h})]),_:1})]),_:1}),e(f,{span:11},{default:o(()=>[e(v,{style:{height:"100%"}},{default:o(()=>[e(K,{value:n.value,"onUpdate:value":m[0]||(m[0]=r=>n.value=r),placeholder:"Autosize height with minimum and maximum number of lines","auto-size":{minRows:23,maxRows:23},"show-count":"",maxlength:500,style:{width:"100%",border:"none"}},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(y,{style:{"margin-right":"0","margin-left":"0"}},{default:o(()=>[e(f,{span:24},{default:o(()=>[e(k,{type:"primary",size:"large",onClick:m[1]||(m[1]=r=>s()),class:"title_button",style:{width:"62vw"}},{default:o(()=>[u("开始分析")]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{span:5},{default:o(()=>[e(v,{style:{height:"100%"}},{default:o(()=>[e(fe)]),_:1})]),_:1})]),_:1})}}},et=U(ge,[["__scopeId","data-v-f134a5f9"]]);export{et as default};
