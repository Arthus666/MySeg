import"./default-d6449ec9.js";import{B as I}from"./index-b8dcc177.js";import{_ as z,a as T}from"./index-8be33a14.js";import{C as M}from"./index-598778fa.js";import{v as q,a as d,A as V,o as A,ac as U,ad as O,ai as E,a2 as J,_ as N,ae as P,W as j,d as C,h as $,f as e,w as n,k as c,q as g,t as W,F as R,j as X,r as B,X as G,e as H}from"./index-1e170dd9.js";import{_ as Q,M as Y}from"./index-f293e05a.js";import{a as Z,_ as ee,b as te,S as ne,c as oe}from"./index-f77292cd.js";/* empty css              */import{_ as se}from"./index-f13b2e24.js";import{a as ae}from"./icon-d0fda4a2.js";import"./collapseMotion-aa2d52e7.js";import"./responsiveObserve-32929795.js";import"./Menu-7d70b547.js";import"./index-6780caaa.js";import"./Dropdown-ad434ecf.js";import"./_flatRest-684801fb.js";import"./omit-f0e2af22.js";import"./List-e1ba37cc.js";import"./eagerComputed-6d64a5a5.js";import"./debounce-0dca6d6d.js";import"./FormItemContext-4dbce140.js";import"./CheckOutlined-f559be9b.js";import"./EyeOutlined-b9fb840d.js";import"./toInteger-020d1e08.js";import"./useSize-f4b45b31.js";import"./index-e6fd304e.js";const le=q({setup(t,s){const h=d(""),_=d("b"),a=d(!1),p=d([]),b=d([]),i=d([]),k=d([]),y=d(null);V(p,()=>{console.log("selectedKeys",p.value[0])}),A(()=>{U({user_token:w},0).then(o=>{o.code==="200"?r.value=[...o.data]:console.log(o)}),O({user_token:w},0).then(o=>{o.code==="200"?(console.log(o.data),l.value=[...o.data]):console.log(o.msg)})});const m=d([]),v=d("segmented"),r=d([]),l=d([]);d("");const S=E(()=>v.value!=="segmented"),x={title:"directoryName",key:"directoryId",user_id:0,fileLink:null},w=J().user_token;return{handleOk:o=>{console.log(o),a.value=!1},handleCancel:o=>{a.value=!1},upload_file:o=>{h.value=o.file.name;const u=new FormData;u.append("father_dirctory_id",p.value[0]||0),u.append("medical_status","unsegmented"),u.append("medical_file",o.file),u.append("medical_model",null),console.log(u),P({user_token:w},u).then(f=>{console.log("上传文件响应值：",f),f.code==="200"?(console.log("上传成功"),a.value=!1,s.emit("on-change",[{type:"local",id:f.data},s.attrs.address])):(y.value="上传失败",console.log(f.msg))})},CouldUpload:()=>{const o=document.getElementsByClassName("ant-tree-node-selected");h.value=o[0].innerText,s.emit("on-change",[{type:"cloud",id:i.value[0]},s.attrs.address]),a.value=!1},onLoadData:o=>new Promise(u=>{var K,D;console.log("length:",r.value.length);const f=((K=r==null?void 0:r.value)==null?void 0:K.length)===0?0:((D=o==null?void 0:o.dataRef)==null?void 0:D.directoryId)||0;console.log(f),U({user_token:w},f).then(L=>{L.code==="200"?(o.dataRef.children=L.data,r.value=[...r.value],u()):(console.log("获取根目录下子目录失败"),u())})}),onLoadData1:o=>new Promise(u=>{console.log("length:",r.value.length);const f=r.value.length===0?0:o.dataRef.directoryId||0;console.log(f),O({user_token:w},f).then(K=>{K.code==="200"?(console.log(K.data),o.dataRef.children=K.data,l.value=[...l.value],u()):(console.log(K.msg),u())})}),fileName:h,treeData:r,treeData1:l,fieldNames:x,selectedKeys:p,selectedKeys1:i,value1:_,visible:a,isselect:S,expandedKeys:b,expandedKeys1:k,fileList:m}}}),ie={key:0,style:{height:"60vh",overflow:"auto"}},de=g("h4",{style:{"margin-top":"20px"}},"1.上传到",-1),re=g("br",null,null,-1),ue=g("br",null,null,-1),pe={key:1,style:{height:"60vh",overflow:"auto"}},ce=g("br",null,null,-1);function _e(t,s,h,_,a,p){const b=Z,i=ee,k=j("folder-outlined"),y=Q,m=I,v=te,r=Y;return C(),$(R,null,[e(i,{value:t.value1,"onUpdate:value":s[0]||(s[0]=l=>t.value1=l),"button-style":"solid"},{default:n(()=>[e(b,{value:"a"},{default:n(()=>[c("本地文件")]),_:1}),e(b,{value:"b"},{default:n(()=>[c("云端文件")]),_:1})]),_:1},8,["value"]),g("div",{class:"import_box",style:{"{{ width":"",height:"}}"},onClick:s[6]||(s[6]=l=>t.visible=!0)},[g("h2",null,W(t.fileName.length===0?"导入医疗文件":`已选择文件:${t.fileName}`),1),e(r,{visible:t.visible,title:"上传",onOk:t.handleOk,onCancel:t.handleCancel,footer:null},{default:n(()=>[t.value1=="a"?(C(),$("div",ie,[de,re,e(y,{expandedKeys:t.expandedKeys,"onUpdate:expandedKeys":s[1]||(s[1]=l=>t.expandedKeys=l),selectedKeys:t.selectedKeys,"onUpdate:selectedKeys":s[2]||(s[2]=l=>t.selectedKeys=l),"load-data":t.onLoadData,"tree-data":t.treeData,"field-names":t.fieldNames,"show-icon":!0},{icon:n(()=>[e(k)]),_:1},8,["expandedKeys","selectedKeys","load-data","tree-data","field-names"]),ue,e(v,{"file-list":t.fileList,"max-count":1,customRequest:t.upload_file,showUploadList:!1},{default:n(()=>[e(m,{type:"primary"},{default:n(()=>[c(" 选择文件 ")]),_:1})]),_:1},8,["file-list","customRequest"])])):(C(),$("div",pe,[e(y,{expandedKeys:t.expandedKeys1,"onUpdate:expandedKeys":s[3]||(s[3]=l=>t.expandedKeys1=l),selectedKeys:t.selectedKeys1,"onUpdate:selectedKeys":s[4]||(s[4]=l=>t.selectedKeys1=l),"load-data":t.onLoadData1,"tree-data":t.treeData1,"field-names":t.fieldNames},null,8,["expandedKeys","selectedKeys","load-data","tree-data","field-names"]),ce,e(m,{type:"primary",onClick:s[5]||(s[5]=l=>t.CouldUpload())},{default:n(()=>[c(" 确定 ")]),_:1})]))]),_:1},8,["visible","onOk","onCancel"])])],64)}const F=N(le,[["render",_e]]),me={style:{"font-size":"20px","font-weight":"600",display:"flex","align-items":"center"}},fe=g("h3",null,"本地文件",-1),ge=g("h3",null,"云端文件",-1),ye={__name:"FunIntro",setup(t){return(s,h)=>{const _=se,a=ne,p=oe;return C(),$(R,null,[g("div",me,[e(X(ae),{type:"icon-gongneng-",style:{"font-size":"28px"}}),c("   功能介绍 ")]),e(_),fe,e(p,{direction:"vertical",size:"small",current:4},{default:n(()=>[e(a,{title:"第一步",description:"选择上传目录",status:"finish"},{icon:n(()=>[c(" ① ")]),_:1}),e(a,{title:"第二步",description:"选择本地文件",status:"finish"},{icon:n(()=>[c(" ② ")]),_:1}),e(a,{title:"第三步",description:"开始数据对照",status:"finish"},{icon:n(()=>[c(" ③ ")]),_:1})]),_:1}),e(_),ge,e(p,{direction:"vertical",size:"small",current:4},{default:n(()=>[e(a,{title:"第一步",description:"选择云端文件",status:"finish"},{icon:n(()=>[c(" ① ")]),_:1}),e(a,{title:"第二步",description:"开始数据对照",status:"finish"},{icon:n(()=>[c(" ② ")]),_:1})]),_:1})],64)}}};const he={__name:"index",setup(t){const s=d("left"),h=d("right"),_=B({type:"",id:""}),a=B({type:"",id:""});G();const p=i=>{console.log(i[0].type,i[0].id,i[1]),i[1]==="left"?(_.type=i[0].type,_.id=i[0].id):i[1]==="right"&&(a.type=i[0].type,a.id=i[0].id)},b=()=>{_.id&&a.id&&window.open(`http://127.0.0.1:3300/#/nii_contrast?right=${JSON.stringify(a)}&left=${JSON.stringify(_)}`,"_blank","noreferrer")};return(i,k)=>{const y=M,m=T,v=z,r=I;return C(),H(v,{style:{padding:"2vh 1vw","margin-right":"0","margin-left":"0"}},{default:n(()=>[e(m,{span:19},{default:n(()=>[e(v,{style:{height:"80vh","margin-bottom":"2vh","margin-right":"1vw"}},{default:n(()=>[e(m,{span:12,class:"ra-box"},{default:n(()=>[e(y,{class:"box",style:{right:"1vw",width:"97%"}},{default:n(()=>[e(F,{onOnChange:p,address:s.value},null,8,["address"])]),_:1})]),_:1}),e(m,{span:12,class:"ra-box"},{default:n(()=>[e(y,{class:"box"},{default:n(()=>[e(F,{onOnChange:p,address:h.value},null,8,["address"])]),_:1})]),_:1})]),_:1}),e(v,{style:{"margin-right":"0","margin-left":"0"}},{default:n(()=>[e(m,{span:24},{default:n(()=>[e(r,{type:"primary",style:{width:"62vw"},size:"large",onClick:k[0]||(k[0]=l=>b())},{default:n(()=>[c("开始对照")]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{span:5},{default:n(()=>[e(y,{style:{height:"100%"}},{default:n(()=>[e(ye)]),_:1})]),_:1})]),_:1})}}},Ye=N(he,[["__scopeId","data-v-1bd9cc64"]]);export{Ye as default};
