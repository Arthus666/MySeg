import"./default-d6449ec9.js";import{a as V,_ as q}from"./index-8be33a14.js";import{C as A}from"./index-598778fa.js";import{F as ce,_ as Y,M as Z}from"./index-f293e05a.js";import{B as ee}from"./index-b8dcc177.js";import{a as te,_ as le,b as re,S as pe,c as ve}from"./index-f77292cd.js";/* empty css              */import{S as fe,_ as me}from"./index-5d595bf1.js";import"./index-b22bf932.js";import{a,a2 as oe,o as ne,ac as X,ad as M,d as B,h as T,q as n,f as e,w as t,k as s,t as N,j as ae,F as H,af as ge,g as se,ag as ye,ah as he,_ as be,r as xe,e as ke}from"./index-1e170dd9.js";import{_ as we}from"./index-f13b2e24.js";import{a as $e}from"./icon-d0fda4a2.js";import"./responsiveObserve-32929795.js";import"./collapseMotion-aa2d52e7.js";import"./Menu-7d70b547.js";import"./index-6780caaa.js";import"./Dropdown-ad434ecf.js";import"./_flatRest-684801fb.js";import"./omit-f0e2af22.js";import"./List-e1ba37cc.js";import"./eagerComputed-6d64a5a5.js";import"./debounce-0dca6d6d.js";import"./FormItemContext-4dbce140.js";import"./CheckOutlined-f559be9b.js";import"./EyeOutlined-b9fb840d.js";import"./toInteger-020d1e08.js";import"./useSize-f4b45b31.js";import"./index-e6fd304e.js";import"./antInputDirective-8ac36ea7.js";import"./SearchOutlined-9fcf4e20.js";const ie="/assets/成功-46ba5e8c.png",Ce={style:{display:"flex","flex-direction":"column",position:"absolute",height:"100%",width:"100%"}},Ke={style:{flex:"10"}},Ie=n("br",null,null,-1),De={style:{flex:"1"}},Fe={key:0,style:{height:"60vh",overflow:"auto"}},Ue=n("h4",null,"1.推理模型",-1),Be=n("br",null,null,-1),Ne=n("br",null,null,-1),Se=n("h4",{style:{"margin-top":"20px"}},"2.上传到",-1),Oe=n("br",null,null,-1),Te={style:{color:"red"}},ze={key:1,style:{height:"60vh",overflow:"auto"}},Le=n("h4",null,"1.推理模型",-1),Me=n("br",null,null,-1),Re=n("h4",{style:{"margin-top":"20px"}},"2.文件",-1),je=n("br",null,null,-1),Ee=n("div",{style:{display:"flex","justify-content":"center"}},[n("img",{src:ie,alt:"加载失败",width:"60",height:"60"})],-1),Pe=n("h3",{style:{"text-align":"center","margin-bottom":"2vh"}},"推理成功",-1),Ve={__name:"ImportFile",setup(R){const b=a(!1),d=oe().user_token,r=a(),v=a(""),$=a("开始推理分割"),K=a(0),j=()=>{if($.value="推理中",y.value==="a"){const o=new FormData;o.append("medical_model",C.value),o.append("medical_file",r.value),ge(o,{user_token:d}).then(l=>{l.code==="200"?(b.value=!0,console.log(l.data),K.value=l.data.fileId):console.error(l)})}else y.value==="b"&&(console.log("云端上传文件的id：",I.value[0]),se(I.value[0],{user_token:d}).then(o=>{if(o.code==="200"){const l=o.data.File.fileId;console.log("云端文件的file_id",l),ye(l,{user_token:d}).then(p=>{p.code==="200"?(console.log(p.data),b.value=!0,K.value=p.data.fileId):console.error(p)})}else console.log(o)}))},y=a("b"),m=a(!1),z=a([]),h=a([]),I=a([]),D=a([]),E=a(null),g=a([]),F=a([]),C=a(""),S={title:"directoryName",key:"directoryId",user_id:0,fileLink:null},_=o=>new Promise(l=>{console.log("length:",g.value.length);const p=g.value.length===0?0:o.dataRef.directoryId||0;console.log(p),X({user_token:d},p).then(u=>{u.code==="200"?(o.dataRef.children=u.data,g.value=[...g.value],l()):(console.log("获取根目录下子目录失败"),l())})}),i=o=>new Promise(l=>{console.log("length:",g.value.length);const p=g.value.length===0?0:o.dataRef.directoryId||0;console.log(p),M({user_token:d},p).then(u=>{u.code==="200"?(console.log(u.data),o.dataRef.children=u.data,F.value=[...F.value],l()):(console.log(u.msg),l())})}),f=o=>{console.log(o.file),console.log(o.file.name),r.value=o.file,v.value=o.file.name,m.value=!1},x=()=>{m.value=!1;const o=document.getElementsByClassName("ant-tree-node-selected");v.value=o[0].innerText};ne(()=>{X({user_token:d},0).then(o=>{o.code==="200"?g.value=[...o.data]:console.log(o)}),M({user_token:d},0).then(o=>{o.code==="200"?(console.log(o.data),F.value=[...o.data]):console.log(o.msg)})});const P=()=>{b.value=!1,$.value="开始推理分割",window.open(`http://127.0.0.1:3300/#/nii_cut/0/${K.value}`)},U=o=>{m.value=!1},L=o=>{console.log(o),m.value=!1};return(o,l)=>{const p=te,u=le,ue=A,O=ee,k=fe,G=me,J=Y,de=re,Q=Z,W=V,_e=q;return B(),T(H,null,[n("div",Ce,[n("div",Ke,[e(ue,{style:{position:"absolute",height:"90%",width:"100%"}},{default:t(()=>[e(u,{value:y.value,"onUpdate:value":l[0]||(l[0]=c=>y.value=c),"button-style":"solid"},{default:t(()=>[e(p,{value:"a"},{default:t(()=>[s("本地文件")]),_:1}),e(p,{value:"b"},{default:t(()=>[s("云端文件")]),_:1})]),_:1},8,["value"]),n("div",{class:"import_box",onClick:l[1]||(l[1]=c=>m.value=!0)},[n("h2",null,N(v.value.length===0?"导入医疗文件":`已选择文件:${v.value}`),1),Ie])]),_:1})]),n("div",De,[e(O,{type:"primary",block:"",onClick:j,size:"large",class:"title_button bottom_button"},{default:t(()=>[s(N($.value),1)]),_:1})])]),e(Q,{visible:m.value,title:"上传",onOk:L,onCancel:U,footer:null},{default:t(()=>[y.value=="a"?(B(),T("div",Fe,[Ue,Be,e(G,{ref:"select",value:C.value,"onUpdate:value":l[2]||(l[2]=c=>C.value=c),style:{width:"140px"},disabled:o.isselect},{default:t(()=>[e(k,{value:"vnet"},{default:t(()=>[s("vnet")]),_:1}),e(k,{value:"swinunet",disabled:!0},{default:t(()=>[s("swinunet")]),_:1}),e(k,{value:"nnunet",disabled:!0},{default:t(()=>[s("nnunet")]),_:1}),e(k,{value:"nnformer",disabled:!0},{default:t(()=>[s("nnformer")]),_:1})]),_:1},8,["value","disabled"]),Ne,Se,e(J,{expandedKeys:h.value,"onUpdate:expandedKeys":l[3]||(l[3]=c=>h.value=c),selectedKeys:z.value,"onUpdate:selectedKeys":l[4]||(l[4]=c=>z.value=c),"load-data":_,"tree-data":g.value,"field-names":S,"show-icon":!0},{icon:t(()=>[e(ae(ce))]),_:1},8,["expandedKeys","selectedKeys","tree-data"]),Oe,n("p",Te,N(E.value||""),1),e(de,{"max-count":1,customRequest:f,showUploadList:!1},{default:t(()=>[e(O,{type:"primary",class:"title_button"},{default:t(()=>[s(" 选择文件 ")]),_:1})]),_:1})])):(B(),T("div",ze,[Le,e(G,{ref:"select",value:C.value,"onUpdate:value":l[5]||(l[5]=c=>C.value=c),style:{width:"140px"},disabled:o.isselect},{default:t(()=>[e(k,{value:"vnet"},{default:t(()=>[s("vnet")]),_:1}),e(k,{value:"swinunet",disabled:!0},{default:t(()=>[s("swinunet")]),_:1}),e(k,{value:"nnunet",disabled:!0},{default:t(()=>[s("nnunet")]),_:1}),e(k,{value:"nnformer",disabled:!0},{default:t(()=>[s("nnformer")]),_:1})]),_:1},8,["value","disabled"]),Me,Re,e(J,{expandedKeys:D.value,"onUpdate:expandedKeys":l[6]||(l[6]=c=>D.value=c),selectedKeys:I.value,"onUpdate:selectedKeys":l[7]||(l[7]=c=>I.value=c),"load-data":i,"tree-data":F.value,"field-names":S},null,8,["expandedKeys","selectedKeys","tree-data"]),je,e(O,{type:"primary",onClick:l[8]||(l[8]=c=>x()),class:"title_button"},{default:t(()=>[s(" 确定 ")]),_:1})]))]),_:1},8,["visible"]),e(Q,{visible:b.value,onOk:L,onCancel:l[11]||(l[11]=c=>m.value=!1),footer:null,style:{top:"25vh"}},{default:t(()=>[Ee,Pe,e(_e,{gutter:16},{default:t(()=>[e(W,{span:12},{default:t(()=>[e(O,{type:"primary",block:"",onClick:l[9]||(l[9]=c=>P()),class:"title_button"},{default:t(()=>[s("立即展示")]),_:1})]),_:1}),e(W,{span:12},{default:t(()=>[e(O,{type:"primary",block:"",onClick:l[10]||(l[10]=c=>b.value=!1),class:"title_button"},{default:t(()=>[s("返回")]),_:1})]),_:1})]),_:1})]),_:1},8,["visible"])],64)}}},qe={style:{display:"flex","flex-direction":"column",position:"absolute",height:"100%",width:"100%"}},Ae={style:{flex:"10"}},He={style:{flex:"1"}},Ge={style:{height:"60vh",overflow:"auto"}},Je=n("h4",null,"2.文件",-1),Qe=n("br",null,null,-1),We={style:{color:"red"}},Xe=n("div",{style:{display:"flex","justify-content":"center"}},[n("img",{src:ie,alt:"加载失败",width:"60",height:"60"})],-1),Ye=n("h3",{style:{"text-align":"center","margin-bottom":"2vh"}},"提取成功",-1),Ze={__name:"DrawMax",setup(R){const w=oe().user_token,d=a(!1),r=a(!1),v=a("b"),$=a("提取最大连通域"),K=a(0),j=()=>{$.value="提取中",se(y.value[0],{user_token:w}).then(_=>{if(_.code==="200"){const i=_.data.File.fileId;he(i,{user_token:w}).then(f=>{f.code==="200"?(console.log(f),d.value=!0,console.log(f.data.fileId),K.value=f.data.fileId):console.log(f)})}else console.log(_)})},y=a([]),m=a([]),z=a(null),h=a([]),I={title:"directoryName",key:"directoryId",user_id:0,fileLink:null},D=a(""),E=()=>{r.value=!1;const _=document.getElementsByClassName("ant-tree-node-selected");D.value=_[0].innerText},g=_=>new Promise(i=>{console.log("length:",h.value.length);const f=h.value.length===0?0:_.dataRef.directoryId||0;console.log(f),M({user_token:w},f).then(x=>{x.code==="200"?(console.log(x.data),_.dataRef.children=x.data,h.value=[...h.value],i()):(console.log(x.msg),i())})});ne(()=>{M({user_token:w},0).then(_=>{_.code==="200"?(console.log(_.data),h.value=[..._.data]):console.log(_.msg)})});const F=()=>{d.value=!1,$.value="提取最大连通域",window.open(`http://127.0.0.1:3300/#/nii_cut/0/${K.value}`)},C=_=>{r.value=!1},S=_=>{console.log(_),r.value=!1};return(_,i)=>{const f=te,x=le,P=A,U=ee,L=Y,o=Z,l=V,p=q;return B(),T(H,null,[n("div",qe,[n("div",Ae,[e(P,{style:{position:"absolute",height:"90%",width:"100%"}},{default:t(()=>[e(x,{value:v.value,"onUpdate:value":i[0]||(i[0]=u=>v.value=u),"button-style":"solid"},{default:t(()=>[e(f,{value:"b"},{default:t(()=>[s("云端文件")]),_:1})]),_:1},8,["value"]),n("div",{class:"import_box",onClick:i[1]||(i[1]=u=>r.value=!0)},[n("h2",null,N(D.value.length===0?"导入医疗文件":`已选择文件:${D.value}`),1)])]),_:1})]),n("div",He,[e(U,{type:"primary",block:"",onClick:j,size:"large",class:"title_button bottom_button"},{default:t(()=>[s(N($.value),1)]),_:1})])]),e(o,{visible:r.value,title:"上传",onOk:S,onCancel:C,footer:null},{default:t(()=>[n("div",Ge,[Je,e(L,{expandedKeys:m.value,"onUpdate:expandedKeys":i[2]||(i[2]=u=>m.value=u),selectedKeys:y.value,"onUpdate:selectedKeys":i[3]||(i[3]=u=>y.value=u),"load-data":g,"tree-data":h.value,"field-names":I},null,8,["expandedKeys","selectedKeys","tree-data"]),Qe,e(U,{type:"primary",onClick:i[4]||(i[4]=u=>E()),class:"title_button"},{default:t(()=>[s(" 确定 ")]),_:1}),n("p",We,N(z.value||null),1)])]),_:1},8,["visible"]),e(o,{visible:d.value,onOk:S,onCancel:i[7]||(i[7]=u=>r.value=!1),footer:null,style:{top:"25vh"}},{default:t(()=>[Xe,Ye,e(p,{gutter:16},{default:t(()=>[e(l,{span:12},{default:t(()=>[e(U,{type:"primary",block:"",onClick:i[5]||(i[5]=u=>F()),class:"title_button"},{default:t(()=>[s("立即展示")]),_:1})]),_:1}),e(l,{span:12},{default:t(()=>[e(U,{type:"primary",block:"",onClick:i[6]||(i[6]=u=>d.value=!1),class:"title_button"},{default:t(()=>[s("返回")]),_:1})]),_:1})]),_:1})]),_:1},8,["visible"])],64)}}},et={style:{"font-size":"20px","font-weight":"600",display:"flex","align-items":"center"}},tt=n("h3",null,"本地文件",-1),lt=n("h3",null,"云端文件",-1),ot={__name:"FunIntro",setup(R){return(b,w)=>{const d=we,r=pe,v=ve;return B(),T(H,null,[n("div",et,[e(ae($e),{type:"icon-gongneng-",style:{"font-size":"28px"}}),s("   功能介绍 ")]),e(d),tt,e(v,{direction:"vertical",size:"small",current:4},{default:t(()=>[e(r,{title:"第一步",description:"选择上传目录",status:"finish"},{icon:t(()=>[s(" ① ")]),_:1}),e(r,{title:"第二步",description:"选择本地文件",status:"finish"},{icon:t(()=>[s(" ② ")]),_:1}),e(r,{title:"第三步",description:"开始推理分割",status:"finish"},{icon:t(()=>[s(" ③ ")]),_:1})]),_:1}),e(d),lt,e(v,{direction:"vertical",size:"small",current:4},{default:t(()=>[e(r,{title:"第一步",description:"选择云端文件",status:"finish"},{icon:t(()=>[s(" ① ")]),_:1}),e(r,{title:"第二步",description:"提取最大联通域",status:"finish"},{icon:t(()=>[s(" ② ")]),_:1})]),_:1})],64)}}};const nt={__name:"index",setup(R){return xe({display:"flex",height:"30px",lineHeight:"30px",fontSize:"16px"}),a("b"),a(),a("开始推导"),(b,w)=>{const d=V,r=A,v=q;return B(),ke(v,{style:{padding:"2vh 1vw","margin-right":"0",height:"91.1vh"}},{default:t(()=>[e(d,{span:9,style:{"margin-right":"1vw"}},{default:t(()=>[e(Ve)]),_:1}),e(d,{span:9,style:{"margin-right":"1vw"}},{default:t(()=>[e(Ze)]),_:1}),e(d,{span:5},{default:t(()=>[e(r,{style:{height:"100%"}},{default:t(()=>[e(ot)]),_:1})]),_:1})]),_:1})}}},Tt=be(nt,[["__scopeId","data-v-2f3626c5"]]);export{Tt as default};
