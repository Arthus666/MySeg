import"./default-d6449ec9.js";import{_ as z,L,a as j}from"./index-e08aa956.js";/* empty css              *//* empty css              */import{_ as G}from"./index-f13b2e24.js";import{_ as H,r as U,a as T,o as Y,u as q,g as J,b as P,c as K,d as p,e as S,w as n,f as c,h as w,i as b,F as k,j as m,k as u,t as g,l as x,m as Q,p as W,n as X,q as y}from"./index-1e170dd9.js";import{_ as Z}from"./MyLogo-dc756089.js";import{N as ee}from"./niivue.es-963f498d.js";import{d as ae}from"./data-1a31d7d2.js";import"./icon-d0fda4a2.js";import{_ as oe,M as se,a as ne}from"./Menu-7d70b547.js";import"./collapseMotion-aa2d52e7.js";import"./RightOutlined-7158796b.js";import"./LeftOutlined-398fc9b5.js";const I=h=>(W("data-v-288110d9"),h=h(),X(),h),le=I(()=>y("div",{style:{segement:"flex","justify-content":"center"}},[y("img",{src:Z,alt:"",width:"80",height:"80"})],-1)),te=I(()=>y("br",null,null,-1)),re=I(()=>y("br",null,null,-1)),ie=I(()=>y("canvas",{id:"gl1"},null,-1)),ce={__name:"NiiVueCut",setup(h){const F=U(ae),V=T("draw.gz.nii"),l=T(!0),d=T(""),e=new ee({dragAndDropEnabled:!0,backColor:[0,0,0,1],show3Dcrosshair:!0}),N=()=>{try{e.setRadiologicalConvention(!1),e.attachTo("gl1"),e.setClipPlane([.3,270,0]),e.setRenderAzimuthElevation(120,10),e.setSliceMM(!0),e.opts.multiplanarForceRender=!1,e.graph.autoSizeMultiplanar=!0,e.graph.opacity=1,e.drawOpacity=.5,e.opts.isColorbar=!1,e.loadVolumes([{url:d.value}]),e.setSliceType(e.sliceTypeRender)}catch(o){console.log(o)}};Y(()=>{const o=q(),a=o.params.id,s=o.params.file_id,f=localStorage.getItem("user_token");a!=="0"?(console.log("云端上传",a,s),J(a,{user_token:f}).then(i=>{if(i.code==="200"){const _=i.data.File.filePath.split("\\").splice(2);V.value=_[_.length-1];const v=_.join("/");d.value="./api/"+v,P("segment",i.data.File.fileId,{user_token:f}).then(C=>{console.log("更新记录",C,"segment")}),console.log("文件路径：",d.value),console.log("文件名称：",V.value),N()}else console.error(i)})):(P("segment",s,{user_token:f}).then(i=>{console.log("更新记录",i,"segment")}),K(s,{user_token:f}).then(i=>{if(console.log("本地上传"),i.code==="200"){const v=i.data.filePath.split("\\").splice(2).join("/");d.value="./api/"+v,N(),console.log("文件路径：",d.value)}else console.error(i)})),console.log(d.value)});const R=o=>{o.name==="保存"?e.saveImage(V.value,!0):o.name==="截图"?e.saveScene("ScreenShot.png"):o.name==="撤销"?e.drawUndo():o.name==="mesh"||o.name==="FLAIR"||o.name==="mni152"||o.name==="CT"||o.name==="CT CBF"||o.name},B=(o,a)=>{a.name==="关闭"?e.setDrawingEnabled(!1):e.setDrawingEnabled(!0),a.name==="轴状"?e.setSliceType(e.sliceTypeAxial):a.name==="矢状"?e.setSliceType(e.sliceTypeCoronal):a.name==="冠状"?e.setSliceType(e.sliceTypeSagittal):a.name==="3D"?e.setSliceType(e.sliceTypeRender):a.name==="A+C+S"?(e.opts.multiplanarForceRender=!1,e.setSliceType(e.sliceTypeMultiplanar)):a.name==="A+C+S+R"?(e.opts.multiplanarForceRender=!0,e.setSliceType(e.sliceTypeMultiplanar)):a.name==="灰色系"?e.volumes[0].colorMap="Gray":a.name==="棕红色系"?e.volumes[0].colorMap="Plasma":a.name==="松绿色系"?e.volumes[0].colorMap="Viridis":a.name==="赤橙色系"?e.volumes[0].colorMap="Inferno":a.name==="彩色系"?e.loadDrawingFromUrl(`${d.value}`):a.name==="红色"?e.setPenValue(1,l.value):a.name==="绿色"?e.setPenValue(2,l.value):a.name==="蓝色"?e.setPenValue(3,l.value):a.name==="黄色"?e.setPenValue(4,l.value):a.name==="青色"?e.setPenValue(5,l.value):a.name==="紫色"?e.setPenValue(6,l.value):a.name==="擦除"?e.setPenValue(0,l.value):a.name==="擦除簇"?e.setPenValue(-0,l.value):a.name==="增长擦除簇"?e.setPenValue(NaN,l.value):a.name==="黑色增长擦除簇"?e.setPenValue(Number.NEGATIVE_INFINITY,l.value):a.name==="明亮增长擦除簇"?e.setPenValue(Number.POSITIVE_INFINITY,l.value):a.name==="对比度"?e.opts.dragMode=e.dragModes.contrast:a.name==="测量"?e.opts.dragMode=e.dragModes.measurement:a.name==="平移/缩放"?e.opts.dragMode=e.dragModes.pan:a.name==="无"&&(e.opts.dragMode=e.dragModes.none),a.isSelected=!0,o.forEach(s=>{s.name!=a.name&&(s.isSelected=!1)})},D=o=>{o.isSelected=!o.isSelected},A=o=>{o.name==="色条"?(e.opts.isColorbar=!e.opts.isColorbar,e.drawScene()):o.name==="放射性"?(e.opts.isRadiologicalConvention=!e.opts.isRadiologicalConvention,e.drawScene()):o.name==="渲染十字准线"&&(e.opts.show3Dcrosshair=!e.opts.show3Dcrosshair,e.drawScene()),o.name==="渲染剪辑平面"?(e.scene.clipPlaneDepthAziElev[0]>1?e.setClipPlane([.3,270,0]):e.setClipPlane([2,270,0]),e.drawScene()):o.name==="世界坐标"?e.setSliceMM(!e.opts.isSliceMM):o.name==="平滑插值"?e.setInterpolation(!e.opts.isNearestInterpolation):o.name==="背景色-暗黑"?(e.opts.backColor[0]<.5?e.opts.backColor=[1,1,1,1]:e.opts.backColor=[0,0,0,1],e.drawScene()):o.name==="填充轮廓"?(l.value=!l.value,e.setPenValue(e.opts.penValue,l.value)):o.name==="笔覆盖所有"?e.drawFillOverwrites=!e.drawFillOverwrites:o.name==="半透明"&&(e.drawOpacity>.75?e.drawOpacity=.5:e.drawOpacity=1,e.drawScene()),o.isSelected=!o.isSelected},E=o=>{if(o.name==="消除雾化"){let a=parseInt(prompt("Remove Haze (1..5)","5"));e.removeHaze(a)}else if(o.name==="增长剪切")e.drawGrowCut();else if(o.name==="最大类间方差法"){let a=parseInt(prompt("Segmentation classes (2..4)","3"));e.drawOtsu(a)}};return(o,a)=>{const s=oe,f=G,i=ne,M=se,_=L,v=j,C=z;return p(),S(C,{style:{"font-family":"'Arial','Microsoft YaHei','黑体','宋体',sans-serif"}},{default:n(()=>[c(_,{width:"150"},{default:n(()=>[le,c(M,{style:{width:"150px"},mode:"vertical",theme:"dark"},{default:n(()=>[(p(!0),w(k,null,b(F,(t,ue)=>(p(),S(i,{key:t.title},{title:n(()=>[u(g(t.title),1)]),default:n(()=>[(p(!0),w(k,null,b(t.items,(r,O)=>(p(),S(s,{key:r.name,onClick:x($=>t.type=="fun"?R(r):t.type=="only"?B(t.items,r):D(r),["stop"])},{default:n(()=>[u(g(r.isSelected?"• ":"  ")+g(r.name),1)]),_:2},1032,["onClick"]))),128)),t.otheritems?(p(),w(k,{key:0},[c(f,{style:{margin:"0",padding:"0","background-color":"#cccccc"}}),(p(!0),w(k,null,b(t.otheritems,(r,O)=>(p(),S(s,{key:r.name,onClick:x($=>r.type=="fun"?E(r):A(r),["stop"])},{default:n(()=>[u(g(r.isSelected?"• ":"  ")+g(r.name),1)]),_:2},1032,["onClick"]))),128))],64)):Q("",!0)]),_:2},1024))),128)),c(s,{onClick:a[0]||(a[0]=t=>m(e).moveCrosshairInVox(-1,0,0)),key:"left"},{default:n(()=>[u(" 左移 ")]),_:1}),c(s,{onClick:a[1]||(a[1]=t=>m(e).moveCrosshairInVox(1,0,0)),key:"right"},{default:n(()=>[u(" 右移 ")]),_:1}),c(s,{onClick:a[2]||(a[2]=t=>m(e).moveCrosshairInVox(0,1,0)),key:"anterior"},{default:n(()=>[u(" 前移 ")]),_:1}),c(s,{onClick:a[3]||(a[3]=t=>m(e).moveCrosshairInVox(0,-1,0)),key:"posterior"},{default:n(()=>[u(" 后移 ")]),_:1}),c(s,{onClick:a[4]||(a[4]=t=>m(e).moveCrosshairInVox(0,0,1)),key:"superior"},{default:n(()=>[u(" 上移 ")]),_:1}),c(s,{onClick:a[5]||(a[5]=t=>m(e).moveCrosshairInVox(0,0,-1)),key:"inferior"},{default:n(()=>[u(" 下移 ")]),_:1})]),_:1}),te,re]),_:1}),c(C,null,{default:n(()=>[c(v,{style:{height:"99.3vh","box-sizing":"border-box"}},{default:n(()=>[ie]),_:1})]),_:1})]),_:1})}}},Ve=H(ce,[["__scopeId","data-v-288110d9"]]);export{Ve as default};
